const infrastructureData = {
    "Core Platform & Developer Infrastructure": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "Version Control": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "CI/CD Platforms": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Dev Environments (Cloud IDEs)": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Infrastructure-as-Code (IaC)": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "CLI Tools": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "API Access": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Build, Deployment, & Runtime Hosting": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "Static Site Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Fullstack App Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Backend/Server Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Container Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Edge Function Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Serverless Functions": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Cold Start Optimized Runtimes": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Warm Instance Support": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Cron Job Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Background Worker Hosting": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Data & Backend Services": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "Database-as-a-Service (DBaaS)": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Object/File Storage": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Caching & Key-Value Stores": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Vector Databases": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "GraphQL Backend Services": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Search-as-a-Service": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Authentication": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Authorization": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Realtime Pub/Sub & WebSockets": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Monitoring, Observability & DevOps": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "Logging & Log Management": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Metrics & Analytics": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Alerting & Uptime Monitoring": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Application Performance Monitoring (APM)": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Audit Logging": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Secrets & Environment Variable Management": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Cost Monitoring & Billing APIs": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Async Processing, Queueing & Workflows": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "Task Queues": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Background Jobs": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Cron Scheduling": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Durable Workflows / Orchestration": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Retry Policies & Dead Letter Queues": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Triggered Jobs": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "CDN, Networking, & Edge": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "CDN Services": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "DNS Management": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Domain Provisioning": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Reverse Proxy / API Gateway": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Load Balancers": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Edge Caching & Smart Routing": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Security & Compliance": {
        description: "Essential services and tools for modern application development.",
        topics: {
            "DDoS Protection": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "SSL Certificate Auto-Provisioning": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "SOC 2 / ISO 27001 / HIPAA Compliance": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "GDPR Compliance Tools": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Role-Based Access Control (RBAC)": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
            "Audit Trails": {
                icon: "📋",
                analogy: "Think of it like an Essential Tool",
                description: "Essential functionality for modern application development and management.",
                benefits: ["Essential functionality","Improved efficiency","Better user experience","Scalable solution"]
            },
        }
    },
    "Communication & Notification": {
        description: "Services that enable communication and notifications between your application and users.",
        topics: {
            "Email Delivery": {
                icon: "📧",
                analogy: "Think of it like a Digital Post Office",
                description: "Reliable email delivery service that ensures your application's emails reach users' inboxes, like a modern post office that guarantees delivery.",
                benefits: ["High deliverability rates","Email analytics and tracking","Template management","Automated email workflows"]
            },
            "SMS / Voice / WhatsApp APIs": {
                icon: "📱",
                analogy: "Think of it like a Multi-Channel Communication Hub",
                description: "Send messages through multiple channels - SMS, voice calls, and WhatsApp - like having a communication center that can reach users wherever they are.",
                benefits: ["Multi-channel messaging","High engagement rates","Global reach","Real-time delivery confirmation"]
            },
            "Push Notifications": {
                icon: "🔔",
                analogy: "Think of it like a Digital Butler",
                description: "Sends instant notifications to users' devices, like having a butler who immediately informs you of important updates.",
                benefits: ["Instant user engagement","High visibility","Targeted messaging","Rich notification content"]
            },
            "Transactional Messaging": {
                icon: "💬",
                analogy: "Think of it like Automated Customer Service",
                description: "Handles important business communications like receipts, confirmations, and alerts automatically.",
                benefits: ["Automated communication","Consistent messaging","Reliable delivery","Compliance with regulations"]
            },
            "In-App Messaging APIs": {
                icon: "💭",
                analogy: "Think of it like an Internal Communication System",
                description: "Enables real-time messaging within your application, like having an internal chat system for your users.",
                benefits: ["Real-time communication","Enhanced user engagement","Contextual messaging","Seamless integration"]
            },
        }
    },
    "Payments, Billing, & Licensing": {
        description: "Complete payment processing, billing management, and licensing solutions for your business.",
        topics: {
            "Payment APIs": {
                icon: "💳",
                analogy: "Think of it like a Digital Cash Register",
                description: "Process payments securely from customers, like having a modern cash register that accepts all payment methods.",
                benefits: ["Multiple payment methods","Secure transactions","Global payment support","Fraud protection"]
            },
            "Subscription Management": {
                icon: "🔄",
                analogy: "Think of it like a Membership Management System",
                description: "Handles recurring billing and subscription lifecycle, like managing gym memberships with automatic renewals.",
                benefits: ["Automated billing cycles","Flexible pricing plans","Subscription analytics","Easy upgrades/downgrades"]
            },
            "Invoicing & Tax Calculation": {
                icon: "🧾",
                analogy: "Think of it like an Automated Accountant",
                description: "Generates invoices and calculates taxes automatically, like having an accountant who handles all billing paperwork.",
                benefits: ["Automated invoicing","Tax compliance","Professional documentation","Payment tracking"]
            },
            "Usage-Based Billing": {
                icon: "📊",
                analogy: "Think of it like a Utility Meter",
                description: "Bills customers based on actual usage, like how utility companies charge based on consumption.",
                benefits: ["Fair pricing model","Scalable revenue","Usage transparency","Cost optimization"]
            },
            "Real-Time Billing Dashboard": {
                icon: "📈",
                analogy: "Think of it like a Financial Control Center",
                description: "Provides real-time insights into billing and revenue, like having a financial dashboard for your business.",
                benefits: ["Real-time revenue tracking","Billing analytics","Financial insights","Revenue optimization"]
            },
        }
    },
    "AI/ML & Advanced Workloads": {
        description: "Artificial intelligence and machine learning services to power intelligent applications.",
        topics: {
            "Model Hosting": {
                icon: "🤖",
                analogy: "Think of it like a Brain Hosting Service",
                description: "Hosts and serves machine learning models, like having a service that keeps your AI brains running and accessible.",
                benefits: ["Scalable AI deployment","Model versioning","Performance optimization","Easy model updates"]
            },
            "AI Inference API": {
                icon: "🧠",
                analogy: "Think of it like an AI Brain on Demand",
                description: "Provides AI capabilities through simple API calls, like having access to intelligent brains whenever you need them.",
                benefits: ["Easy AI integration","No ML expertise required","Scalable AI processing","Cost-effective AI access"]
            },
            "Embedding + Vector Search": {
                icon: "🔍",
                analogy: "Think of it like Semantic Memory Search",
                description: "Converts text to numerical representations and finds similar content, like having a search system that understands meaning.",
                benefits: ["Semantic search capabilities","AI-powered recommendations","Content similarity matching","Intelligent data organization"]
            },
            "ML Pipeline Hosting": {
                icon: "⚙️",
                analogy: "Think of it like an Automated Factory for AI",
                description: "Manages the entire machine learning workflow from data to deployment, like having an automated factory that builds and maintains AI systems.",
                benefits: ["End-to-end ML workflows","Automated model training","Data pipeline management","Production-ready ML"]
            },
        }
    },
    "Internal Tools & No-Code/Low-Code": {
        description: "Tools that enable non-technical users to build and manage applications without extensive coding.",
        topics: {
            "Admin Panel Builders": {
                icon: "⚙️",
                analogy: "Think of it like a Control Room Builder",
                description: "Creates administrative interfaces without coding, like having a tool that builds control rooms for managing your business.",
                benefits: ["No coding required","Rapid admin interface creation","Customizable dashboards","User-friendly management"]
            },
            "Workflow Automation": {
                icon: "🔄",
                analogy: "Think of it like an Automated Assembly Line",
                description: "Automates business processes and workflows, like having an assembly line that handles repetitive tasks automatically.",
                benefits: ["Process automation","Reduced manual work","Consistent execution","Error reduction"]
            },
            "API Builders / No-Code Backends": {
                icon: "🔧",
                analogy: "Think of it like a Backend Factory",
                description: "Creates APIs and backend services without traditional programming, like having a factory that builds the behind-the-scenes parts of your app.",
                benefits: ["No backend coding","Rapid API development","Visual development","Database integration"]
            },
        }
    },
    "Product Analytics & Growth": {
        description: "Tools to understand user behavior, optimize products, and drive growth through data-driven decisions.",
        topics: {
            "Product Analytics": {
                icon: "📊",
                analogy: "Think of it like a User Behavior Detective",
                description: "Tracks and analyzes how users interact with your product, like having a detective who studies user behavior patterns.",
                benefits: ["User behavior insights","Data-driven decisions","Product optimization","User journey mapping"]
            },
            "Heatmaps & Session Replay": {
                icon: "🎥",
                analogy: "Think of it like a User Experience Camera",
                description: "Visualizes user interactions and replays user sessions, like having cameras that show exactly how users navigate your product.",
                benefits: ["Visual user insights","UX optimization","Issue identification","Conversion optimization"]
            },
            "Feature Flags": {
                icon: "🚩",
                analogy: "Think of it like a Feature Light Switch",
                description: "Controls which features are visible to users, like having light switches that can turn features on and off instantly.",
                benefits: ["Gradual feature rollouts","A/B testing capabilities","Risk mitigation","Instant feature control"]
            },
            "AB Testing": {
                icon: "🧪",
                analogy: "Think of it like a Scientific Experiment Lab",
                description: "Tests different versions of features to see which performs better, like running scientific experiments to optimize your product.",
                benefits: ["Data-driven optimization","Risk-free experimentation","Conversion improvement","User experience enhancement"]
            },
            "User Feedback Tools": {
                icon: "💬",
                analogy: "Think of it like a Customer Suggestion Box",
                description: "Collects and manages user feedback and suggestions, like having a digital suggestion box that helps improve your product.",
                benefits: ["User voice collection","Product improvement insights","Customer satisfaction tracking","Feature prioritization"]
            },
        }
    },
    "Data Pipelines & Warehousing": {
        description: "Tools for collecting, processing, storing, and analyzing large amounts of data.",
        topics: {
            "ETL Tools": {
                icon: "🔄",
                analogy: "Think of it like a Data Processing Factory",
                description: "Extracts, transforms, and loads data from various sources, like having a factory that processes raw materials into finished products.",
                benefits: ["Automated data processing","Data quality improvement","Multi-source integration","Scalable data workflows"]
            },
            "Data Warehouses": {
                icon: "🏢",
                analogy: "Think of it like a Massive Data Storage Building",
                description: "Centralized storage for large amounts of structured data, like having a massive building designed specifically for storing and organizing data.",
                benefits: ["Centralized data storage","Fast query performance","Data consistency","Business intelligence support"]
            },
            "Data Visualization Dashboards": {
                icon: "📈",
                analogy: "Think of it like a Data Art Gallery",
                description: "Creates visual representations of data through charts and graphs, like having an art gallery that displays data as beautiful, understandable visuals.",
                benefits: ["Visual data insights","Interactive reporting","Real-time monitoring","Decision-making support"]
            },
        }
    },
    "Documentation, Portability & Meta": {
        description: "Tools for documentation, data portability, and platform management features.",
        topics: {
            "API Documentation Tools": {
                icon: "📚",
                analogy: "Think of it like an API Instruction Manual",
                description: "Creates and maintains documentation for APIs, like having an instruction manual that explains how to use your services.",
                benefits: ["Clear API documentation","Developer onboarding","Reduced support requests","API adoption improvement"]
            },
            "Data Ownership / Export Tools": {
                icon: "📤",
                analogy: "Think of it like a Data Moving Service",
                description: "Allows users to export and own their data, like having a moving service that helps users take their data with them.",
                benefits: ["Data portability","User control","Compliance support","Trust building"]
            },
            "Self-Hosting Options": {
                icon: "🏠",
                analogy: "Think of it like a Home Installation Kit",
                description: "Allows users to run the service on their own infrastructure, like having a kit that lets users install the service in their own home.",
                benefits: ["Data sovereignty","Custom deployment","Offline operation","Security control"]
            },
            "Open Source Licensing": {
                icon: "🔓",
                analogy: "Think of it like an Open Recipe Book",
                description: "Provides open source code and licensing, like having a recipe book that's freely available for everyone to use and modify.",
                benefits: ["Community collaboration","Transparency","Customization freedom","Cost reduction"]
            },
            "Team Collaboration Features": {
                icon: "👥",
                analogy: "Think of it like a Digital Team Workspace",
                description: "Enables multiple users to work together on projects, like having a digital workspace where teams can collaborate effectively.",
                benefits: ["Team productivity","Shared workflows","Role-based access","Collaborative development"]
            },
            "Project Transfer Support": {
                icon: "🔄",
                analogy: "Think of it like a Project Moving Service",
                description: "Allows projects to be transferred between users or organizations, like having a service that helps move projects from one owner to another.",
                benefits: ["Project portability","Ownership transfer","Team handoffs","Organizational changes"]
            },
            "Multi-region Migration Support": {
                icon: "🌍",
                analogy: "Think of it like a Global Moving Service",
                description: "Supports moving applications between different geographic regions, like having a moving service that can relocate your application worldwide.",
                benefits: ["Geographic flexibility","Compliance requirements","Performance optimization","Disaster recovery"]
            },
        }
    },
};

// Progress tracking
let completedTopics = new Set();
let totalTopics = 0;

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    initializeProgress();
    initializeNavigation();
    initializeSearch();
    loadProgressFromStorage();
    updateProgressDisplay();
});

// Initialize progress tracking
function initializeProgress() {
    // Count total topics
    Object.keys(infrastructureData).forEach(category => {
        totalTopics += Object.keys(infrastructureData[category].topics).length;
    });
    
    // Update total topics display
    document.querySelector('.total-topics').textContent = `of ${totalTopics} total topics`;
}

// Load progress from localStorage
function loadProgressFromStorage() {
    const savedProgress = localStorage.getItem('infrastructureGuideProgress');
    if (savedProgress) {
        completedTopics = new Set(JSON.parse(savedProgress));
    }
}

// Save progress to localStorage
function saveProgressToStorage() {
    localStorage.setItem('infrastructureGuideProgress', JSON.stringify([...completedTopics]));
}

// Update progress display
function updateProgressDisplay() {
    const completedCount = completedTopics.size;
    const percentage = Math.round((completedCount / totalTopics) * 100);
    
    // Update progress bar
    const progressFill = document.getElementById('progressFill');
    progressFill.style.width = `${percentage}%`;
    
    // Update text
    document.querySelector('.progress-text').textContent = `${percentage}% Complete`;
    document.querySelector('.completed-topics').textContent = `${completedCount} topics completed`;
}

// Mark topic as done/undone
function toggleTopicCompletion(categoryName, topicName) {
    const topicKey = `${categoryName}|${topicName}`;
    
    if (completedTopics.has(topicKey)) {
        completedTopics.delete(topicKey);
    } else {
        completedTopics.add(topicKey);
    }
    
    saveProgressToStorage();
    updateProgressDisplay();
    
    // Update the button and card appearance
    const button = event.target;
    const card = button.closest('.topic-card');
    
    if (completedTopics.has(topicKey)) {
        button.textContent = 'Completed ✓';
        button.classList.add('completed');
        card.classList.add('completed');
    } else {
        button.textContent = 'Mark as Done';
        button.classList.remove('completed');
        card.classList.remove('completed');
    }
}

// Check if topic is completed
function isTopicCompleted(categoryName, topicName) {
    const topicKey = `${categoryName}|${topicName}`;
    return completedTopics.has(topicKey);
}

// Initialize navigation
function initializeNavigation() {
    const navigation = document.getElementById('navigation');
    const content = document.getElementById('content');
    
    // Create navigation cards
    Object.keys(infrastructureData).forEach((category, index) => {
        const navCard = document.createElement('div');
        navCard.className = 'nav-card';
        navCard.innerHTML = `
            <h3>
                <span class="count">${index + 1}</span>
                ${category}
            </h3>
            <p>${infrastructureData[category].description}</p>
        `;
        
        navCard.addEventListener('click', () => {
            // Remove active class from all cards
            document.querySelectorAll('.nav-card').forEach(card => card.classList.remove('active'));
            // Add active class to clicked card
            navCard.classList.add('active');
            // Load content
            loadCategoryContent(category);
        });
        
        navigation.appendChild(navCard);
    });
}

// Load category content
function loadCategoryContent(category) {
    const content = document.getElementById('content');
    const categoryData = infrastructureData[category];
    
    let topicsHTML = '';
    Object.keys(categoryData.topics).forEach(topicName => {
        const topic = categoryData.topics[topicName];
        const isCompleted = isTopicCompleted(category, topicName);
        const completedClass = isCompleted ? 'completed' : '';
        const buttonText = isCompleted ? 'Completed ✓' : 'Mark as Done';
        const buttonClass = isCompleted ? 'mark-done-btn completed' : 'mark-done-btn';
        
        topicsHTML += `
            <div class="topic-card ${completedClass}">
                <h3>
                    <span class="topic-icon">${topic.icon}</span>
                    ${topicName}
                </h3>
                <div class="analogy-box">
                    <h4>${topic.analogy}</h4>
                    <p>${topic.description}</p>
                </div>
                <div class="benefits-list">
                    ${topic.benefits.map(benefit => `
                        <div class="benefit-item">
                            <span class="benefit-icon">✓</span>
                            ${benefit}
                        </div>
                    `).join('')}
                </div>
                <button class="${buttonClass}" onclick="toggleTopicCompletion('${category}', '${topicName}')">
                    ${buttonText}
                </button>
            </div>
        `;
    });
    
    content.innerHTML = `
        <div class="module-title">${category}</div>
        <div class="module-intro">
            <p>${categoryData.description}</p>
        </div>
        <div class="topics-grid">
            ${topicsHTML}
        </div>
    `;
}

// Initialize search functionality
function initializeSearch() {
    const searchInput = document.getElementById('searchInput');
    
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        if (searchTerm.length < 2) {
            // Show all categories if search is too short
            document.querySelectorAll('.nav-card').forEach(card => {
                card.style.display = 'block';
            });
            return;
        }
        
        // Search through categories and topics
        let foundCategories = new Set();
        
        Object.keys(infrastructureData).forEach(category => {
            const categoryData = infrastructureData[category];
            
            // Check if category name matches
            if (category.toLowerCase().includes(searchTerm)) {
                foundCategories.add(category);
            }
            
            // Check if any topic matches
            Object.keys(categoryData.topics).forEach(topicName => {
                const topic = categoryData.topics[topicName];
                if (topicName.toLowerCase().includes(searchTerm) ||
                    topic.description.toLowerCase().includes(searchTerm) ||
                    topic.analogy.toLowerCase().includes(searchTerm) ||
                    topic.benefits.some(benefit => benefit.toLowerCase().includes(searchTerm))) {
                    foundCategories.add(category);
                }
            });
        });
        
        // Show/hide navigation cards based on search results
        document.querySelectorAll('.nav-card').forEach((card, index) => {
            const categoryName = Object.keys(infrastructureData)[index];
            if (foundCategories.has(categoryName)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
}

// Scroll to top function
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
} 